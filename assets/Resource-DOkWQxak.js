import{a as J}from"./index-DW_MHI2K.js";import{i as F}from"./index-BciqUSOs.js";import{r,p as G,x as I,h as k,o as m,_ as W,e as L,w as a,b as o,f as e,i as d,F as O,j as $,l as q,t as V}from"./index-erCPS4Xs.js";const E={__name:"EChartsCurve",props:{title:String,xAxisData:Array,seriesData:Array},setup(b){const t=r(null);let s=null;const u=b,p=()=>{s=F(t.value),i()},i=()=>{const c={title:{text:u.title,left:"center"},tooltip:!1,xAxis:{type:"category",boundaryGap:!1,data:Array.from({length:8760},(_,f)=>f+1)},yAxis:{type:"value",name:"MW",min:0,max:1,interval:.1,axisLabel:{formatter:"{value}"}},series:[{name:"发电量",type:"line",data:u.seriesData,markLine:{data:[{type:"average",name:"平均值"}]},smooth:!0,areaStyle:{}}]};s&&s.setOption(c)};return G(()=>[u.title,u.seriesData],()=>{i()},{deep:!0}),I(()=>{p()}),(c,_)=>(m(),k("div",{ref_key:"chartRef",ref:t,style:{width:"100%",height:"400px"}},null,512))}},z={__name:"TimeOfUseChart",props:{flatRate:Number,valleyRate:Number,peakRate:Number,hours:Array},setup(b){const t=b,s=r(null),u=()=>{const p=F(s.value),i={title:{text:"分时电价柱状图",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:Array.from({length:24},(c,_)=>`${_}:00`)},yAxis:{type:"value",name:"电价 (元)"},series:[{name:"电价",type:"bar",data:t.hours.map(c=>{switch(c){case"flat":return t.flatRate;case"valley":return t.valleyRate;case"peak":return t.peakRate;default:return 0}}),itemStyle:{color:function(c){switch(t.hours[c.dataIndex]){case"flat":return"#7cb5ec";case"valley":return"#90ed7d";case"peak":return"#f7a35c";default:return"#ccc"}}}}]};p.setOption(i)};return I(()=>{u()}),G(()=>[t.flatRate,t.valleyRate,t.peakRate,t.hours],()=>{u()},{deep:!0}),(p,i)=>(m(),k("div",{ref_key:"chartRef",ref:s,style:{width:"100%",height:"400px"}},null,512))}},K={class:"hour-setting"},Q={__name:"Resource",setup(b){const t=[{label:"北京",value:"BJ"},{label:"上海",value:"SH"},{label:"广东",value:"GD"}],s=r(""),u=r([]),p=r([]);r([]);const i=r({location:"",description:"",images:[]}),c=r([]),_=async()=>{try{const v=await J.get("http://localhost:8080/factor");u.value=v.data.wind_factor,p.value=v.data.solar_factor,i.value={location:"",description:""},c.value=[{name:"年平均温度",value:""},{name:"年平均风速",value:""},{name:"水平面年总辐照度",value:""},{name:"年均光照时长",value:""}]}catch(v){console.log(v),alert("获取数据失败")}},f=r(.5),w=r(.3),D=r(.7),x=r(Array.from({length:24},()=>"flat"));return(v,l)=>{const R=o("el-option"),U=o("el-select"),y=o("el-form-item"),M=o("el-button"),N=o("el-form"),B=o("el-card"),S=o("el-table-column"),P=o("el-table"),h=o("el-col"),A=o("el-row"),C=o("el-input-number"),T=o("el-main"),j=o("el-container");return m(),L(j,{class:"resource-config-container"},{default:a(()=>[e(T,{class:"main"},{default:a(()=>[e(N,{"label-width":"120px"},{default:a(()=>[e(y,{label:"选择省份",style:{width:"500px"}},{default:a(()=>[e(U,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=n=>s.value=n),placeholder:"请选择省份"},{default:a(()=>[(m(),k(O,null,$(t,n=>e(R,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:a(()=>[e(M,{type:"primary",onClick:_},{default:a(()=>l[4]||(l[4]=[q("获取数据")])),_:1})]),_:1})]),_:1}),e(A,{gutter:20},{default:a(()=>[e(h,{span:14},{default:a(()=>[e(B,{class:"province-info"},{default:a(()=>[d("h3",null,V(s.value?s.value:"未选择省份"),1),d("p",null,"地理位置："+V(i.value.location),1),d("p",null,"资源概况："+V(i.value.description),1)]),_:1}),e(B,{class:"resource-table",style:{height:"500px"}},{default:a(()=>[l[5]||(l[5]=d("h3",null,"资源统计数据",-1)),e(P,{data:c.value,border:"",style:{width:"100%"}},{default:a(()=>[e(S,{prop:"name",label:"资源类型"}),e(S,{prop:"value",label:"数值"})]),_:1},8,["data"])]),_:1})]),_:1}),e(h,{span:10},{default:a(()=>[e(E,{title:"风电出力标幺值",seriesData:u.value},null,8,["seriesData"]),e(E,{title:"光伏出力标幺值",seriesData:p.value},null,8,["seriesData"])]),_:1})]),_:1}),l[6]||(l[6]=d("h3",null,"每小时电价类型设置",-1)),e(A,{gutter:20},{default:a(()=>[(m(!0),k(O,null,$(x.value,(n,g)=>(m(),L(h,{key:g,span:6},{default:a(()=>[d("div",K,[d("span",null,V(g)+":00",1),e(U,{modelValue:x.value[g],"onUpdate:modelValue":H=>x.value[g]=H,placeholder:"请选择"},{default:a(()=>[e(R,{label:"平段",value:"flat"}),e(R,{label:"谷段",value:"valley"}),e(R,{label:"高峰",value:"peak"})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:2},1024))),128))]),_:1}),e(A,null,{default:a(()=>[e(h,{span:4},{default:a(()=>[e(N,{"label-width":"100px",class:"price-setting"},{default:a(()=>[e(y,{label:"平段电价:"},{default:a(()=>[e(C,{modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=n=>f.value=n),step:.01},null,8,["modelValue"])]),_:1}),e(y,{label:"谷段电价:"},{default:a(()=>[e(C,{modelValue:w.value,"onUpdate:modelValue":l[2]||(l[2]=n=>w.value=n),step:.01},null,8,["modelValue"])]),_:1}),e(y,{label:"高峰电价:"},{default:a(()=>[e(C,{modelValue:D.value,"onUpdate:modelValue":l[3]||(l[3]=n=>D.value=n),step:.01},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{span:20},{default:a(()=>[e(z,{flatRate:f.value,valleyRate:w.value,peakRate:D.value,hours:x.value,style:{"margin-top":"30px"}},null,8,["flatRate","valleyRate","peakRate","hours"])]),_:1})]),_:1})]),_:1})]),_:1})}}},ee=W(Q,[["__scopeId","data-v-4743048d"]]);export{ee as default};
