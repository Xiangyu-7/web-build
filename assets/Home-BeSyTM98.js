import{a as I}from"./index-DW_MHI2K.js";import{_ as $,r as c,n as q,p as T,h as b,f as l,q as E,i as s,w as t,b as m,t as M,s as G,F as k,o as d,j as U,e as C,l as N}from"./index-erCPS4Xs.js";const J=""+new URL("electrolyzer-D2XhPpSW.jpg",import.meta.url).href,Q=""+new URL("grid-F8W8QrIU.jpg",import.meta.url).href,X=""+new URL("load-C_0rHyBn.jpg",import.meta.url).href,A=""+new URL("pv-COkJ4pjq.jpg",import.meta.url).href,Y=""+new URL("storage-DxOh44Nx.jpg",import.meta.url).href,Z=""+new URL("tank-UG3nlBLF.jpg",import.meta.url).href,ee=""+new URL("wind-B_xyfLrM.jpg",import.meta.url).href,le={class:"image-container"},ae={class:"image-label"},te={class:"table-container"},oe={class:"table-container"},ne={class:"table-container"},se={class:"settings-content"},ue={__name:"Home",setup(me){const h=c(["1"]),x=c(!1),y=c({label:"",settingsSchema:[]}),S=q([{name:"wind",label:"风力发电",settingsSchema:[{key:"minCapacity",label:"最小容量(MW)",type:"text",num:"70"},{key:"maxCapacity",label:"最大容量(MW)",type:"text",num:"130"},{key:"investmentCost",label:"投资成本(/KW)",type:"text",num:"3600"},{key:"maintenanceCost",label:"运维成本(/KW)",type:"text",num:"98.8"},{key:"lifespan",label:"使用寿命",type:"text",num:"20"}]},{name:"pv",label:"光伏发电",settingsSchema:[{key:"minCapacity",label:"最小容量(MW)",type:"text",num:"0"},{key:"maxCapacity",label:"最大容量(MW)",type:"text",num:"0"},{key:"investmentCost",label:"投资成本(/KW)",type:"text",num:"2800"},{key:"maintenanceCost",label:"运维成本(/KW)",type:"text",num:"62.2"},{key:"lifespan",label:"使用寿命(年)",type:"text",num:"20"}]},{name:"storage",label:"储能系统",settingsSchema:[{key:"minCapacity",label:"最小容量(MW)",type:"text",num:"0"},{key:"maxCapacity",label:"最大容量(MW)",type:"text",num:"50"},{key:"investmentCost",label:"投资成本(/KW)",type:"text",num:"850"},{key:"maintenanceCost",label:"运维成本(/KW)",type:"text",num:"21.25"},{key:"lifespan",label:"使用寿命(年)",type:"text",num:"20"}]},{name:"electrolyzer",label:"制氢电解槽",settingsSchema:[{key:"minCapacity",label:"最小容量(MW)",type:"text",num:"55"},{key:"maxCapacity",label:"最大容量(MW)",type:"text",num:"130"},{key:"investmentCost",label:"投资成本(/KW)",type:"text",num:"1500"},{key:"maintenanceCost",label:"运维成本(/KW)",type:"text",num:"70.5"},{key:"lifespan",label:"使用寿命(年)",type:"text",num:"20"}]},{name:"tank",label:"储氢罐",settingsSchema:[{key:"minCapacity",label:"最小个数",type:"text",num:"0"},{key:"maxCapacity",label:"最大个数",type:"text",num:"10"},{key:"investmentCost",label:"投资成本(/个)",type:"text",num:"4000000"},{key:"maintenanceCost",label:"运维成本(/KW)",type:"text",num:"0"},{key:"lifespan",label:"使用寿命(年)",type:"text",num:"20"}]},{name:"grid",label:"电网连接",settingsSchema:[{key:"gridType",label:"并网方式",type:"select",options:[{label:"并网上网"},{label:"并网不上网"},{label:"离网"}]}]}]),O=u=>new URL(Object.assign({"../assets/images/electrolyzer.jpg":J,"../assets/images/grid.jpg":Q,"../assets/images/load.jpg":X,"../assets/images/pv.jpg":A,"../assets/images/storage.jpg":Y,"../assets/images/tank.jpg":Z,"../assets/images/wind.jpg":ee})[`../assets/images/${u}.jpg`],import.meta.url).href,K=u=>{y.value=u,x.value=!0,document.body.style.overflow="hidden"},w=()=>{x.value=!1,document.body.style.overflow=""},R=()=>{console.log(`保存的设置 - ${y.value.label}:`,y.value.settings),w()},W=()=>{const u={};return S.forEach(e=>{u[e.name]={},e.settingsSchema.forEach(f=>{f.num!==void 0&&(u[e.name][f.key]=f.num)})}),u},_=c(W());T(()=>y.value.settingsSchema,()=>{_.value=W(),console.log(_.value),B(_.value)},{deep:!0});const B=async()=>{try{console.log("Sending numValues:",_.value);const u=await I.post("http://127.0.0.1:8080/calculate",{numValues:_.value});console.log(u)}catch(u){console.error("请求失败:",u),alert("请求失败，请检查网络连接")}},r=c({chargeEfficiency:"0.9",dischargeEfficiency:"0.9",minSOC:"20",maxSOC:"100",rate:"0.5"}),i=c({volume:"2000",maxpressure:"1.6",minpressure:"0.3",atmosphericpressure:"0.101325",storagevolume:"25666"}),v=c({auxiliaryLoadFactor:"1",ElectricityPerNm3:"5"});return(u,e)=>{const f=m("el-image"),F=m("el-collapse-item"),P=m("el-collapse"),g=m("el-card"),j=m("el-col"),n=m("el-input"),o=m("el-form-item"),V=m("el-form"),z=m("el-row"),D=m("el-option"),H=m("el-select"),L=m("el-button");return d(),b(k,null,[l(z,{class:"home",gutter:20},{default:t(()=>[l(j,{span:10,style:{"margin-top":"20px"}},{default:t(()=>[l(g,{style:{height:"1000px"}},{default:t(()=>[e[13]||(e[13]=s("h2",{class:"system-title"},"风光制氢系统",-1)),l(P,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=a=>h.value=a),class:"collapse-panel"},{default:t(()=>[l(F,{title:"组件库",name:"1"},{default:t(()=>[s("div",le,[(d(!0),b(k,null,U(S,a=>(d(),b("div",{class:"image-with-label",key:a.name},[l(f,{class:"image-item",src:O(a.name),fit:"cover",alt:a.label,onClick:p=>K(a)},null,8,["src","alt","onClick"]),s("p",ae,M(a.label),1)]))),128))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(j,{span:14,style:{"margin-top":"20px"}},{default:t(()=>[l(g,{shadow:"hover",class:"user-table"},{default:t(()=>[e[17]||(e[17]=s("h2",{class:"system-title"},"模型参数",-1)),l(g,{shadow:"hover",class:"user-table"},{default:t(()=>[s("div",te,[e[14]||(e[14]=s("h3",null,"电化学储能 ",-1)),l(V,{inline:!0,model:r.value,"label-width":"160px",class:"demo-form-inline"},{default:t(()=>[l(o,{label:"充电效率"},{default:t(()=>[l(n,{modelValue:r.value.chargeEfficiency,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.chargeEfficiency=a),clearable:""},null,8,["modelValue"])]),_:1}),l(o,{label:"放电效率"},{default:t(()=>[l(n,{modelValue:r.value.dischargeEfficiency,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.dischargeEfficiency=a),clearable:""},null,8,["modelValue"])]),_:1}),l(o,{label:"最小荷电状态"},{default:t(()=>[l(n,{modelValue:r.value.minSOC,"onUpdate:modelValue":e[3]||(e[3]=a=>r.value.minSOC=a),clearable:""},null,8,["modelValue"])]),_:1}),l(o,{label:"最大荷电状态"},{default:t(()=>[l(n,{modelValue:r.value.maxSOC,"onUpdate:modelValue":e[4]||(e[4]=a=>r.value.maxSOC=a),clearable:""},null,8,["modelValue"])]),_:1}),l(o,{label:"充放电倍率"},{default:t(()=>[l(n,{modelValue:r.value.rate,"onUpdate:modelValue":e[5]||(e[5]=a=>r.value.rate=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1}),l(g,{shadow:"hover",class:"user-table",style:{"margin-top":"20px"}},{default:t(()=>[s("div",oe,[e[15]||(e[15]=s("h3",null,"储氢罐 ",-1)),l(V,{inline:!0,model:i.value,"label-width":"160px",class:"demo-form-inline"},{default:t(()=>[l(o,{label:"几何容积(m3)"},{default:t(()=>[l(n,{modelValue:i.value.volume,"onUpdate:modelValue":e[6]||(e[6]=a=>i.value.volume=a),clearable:""},null,8,["modelValue"])]),_:1}),l(o,{label:"最高工作压力(MPa)"},{default:t(()=>[l(n,{modelValue:i.value.maxpressure,"onUpdate:modelValue":e[7]||(e[7]=a=>i.value.maxpressure=a),clearable:""},null,8,["modelValue"])]),_:1}),l(o,{label:"最低工作压力(MPa)"},{default:t(()=>[l(n,{modelValue:i.value.minpressure,"onUpdate:modelValue":e[8]||(e[8]=a=>i.value.minpressure=a),clearable:""},null,8,["modelValue"])]),_:1}),l(o,{label:"大气压(MPa)"},{default:t(()=>[l(n,{modelValue:i.value.atmosphericpressure,"onUpdate:modelValue":e[9]||(e[9]=a=>i.value.atmosphericpressure=a),clearable:""},null,8,["modelValue"])]),_:1}),l(o,{label:"有效储氢容积(m3/个)"},{default:t(()=>[l(n,{modelValue:i.value.storagevolume,"onUpdate:modelValue":e[10]||(e[10]=a=>i.value.storagevolume=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1}),l(g,{shadow:"hover",class:"user-table",style:{"margin-top":"20px"}},{default:t(()=>[s("div",ne,[e[16]||(e[16]=s("h3",null,"制氢系统 ",-1)),l(V,{inline:!0,model:v.value,"label-width":"160px",class:"demo-form-inline"},{default:t(()=>[l(o,{label:"辅机负荷系数"},{default:t(()=>[l(n,{modelValue:v.value.auxiliaryLoadFactor,"onUpdate:modelValue":e[11]||(e[11]=a=>v.value.auxiliaryLoadFactor=a),clearable:""},null,8,["modelValue"])]),_:1}),l(o,{label:"每标方氢用电量(kw·h)"},{default:t(()=>[l(n,{modelValue:v.value.ElectricityPerNm3,"onUpdate:modelValue":e[12]||(e[12]=a=>v.value.ElectricityPerNm3=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1})]),_:1})]),_:1}),x.value?(d(),b("div",{key:0,class:"overlay",onClick:w})):E("",!0),s("div",{class:G(["settings-panel",{active:x.value}])},[s("div",se,[s("h3",null,"设置参数 - "+M(y.value.label),1),l(V,{"label-width":"120px"},{default:t(()=>[(d(!0),b(k,null,U(y.value.settingsSchema,a=>(d(),C(o,{key:a.key,label:a.label},{default:t(()=>[a.type==="text"?(d(),C(n,{key:0,modelValue:a.num,"onUpdate:modelValue":p=>a.num=p},null,8,["modelValue","onUpdate:modelValue"])):a.type==="select"?(d(),C(H,{key:1,modelValue:a.label,"onUpdate:modelValue":p=>a.label=p},{default:t(()=>[(d(!0),b(k,null,U(a.options,p=>(d(),C(D,{label:p.label,value:p.label},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])):E("",!0)]),_:2},1032,["label"]))),128)),l(o,null,{default:t(()=>[l(L,{type:"primary",onClick:R},{default:t(()=>e[18]||(e[18]=[N("保存")])),_:1}),l(L,{onClick:w},{default:t(()=>e[19]||(e[19]=[N("取消")])),_:1})]),_:1})]),_:1})])],2)],64)}}},de=$(ue,[["__scopeId","data-v-195645bf"]]);export{de as default};
